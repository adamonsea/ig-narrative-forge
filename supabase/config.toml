project_id = "fpoywkjgdapgjtdeooak"

[api]
enabled = true
port = 54321
schemas = ["public", "storage", "graphql_public"]
extra_search_path = ["public", "extensions"]
max_rows = 1000

[db]
port = 54322

[studio]
enabled = true
port = 54323

[inbucket]
enabled = true
port = 54324
smtp_port = 54325
pop3_port = 54326

[storage]
enabled = true
file_size_limit = "50MiB"
image_transformation = { enabled = true }

[auth]
enabled = true
additional_redirect_urls = ["https://localhost:3000"]
jwt_expiry = 3600
enable_signup = true

[auth.email]
enable_signup = true
double_confirm_changes = true
enable_confirmations = false

# ========================================
# CORE PRODUCTION FUNCTIONS
# ========================================

# Public-facing functions
[functions.secure-newsletter-signup]
verify_jwt = false

[functions.send-confirmation-email]
verify_jwt = false

[functions.verify-subscription]
verify_jwt = false

[functions.topic-manifest]
verify_jwt = false

[functions.generate-og-image]
verify_jwt = false

[functions.reactivate-sources]
verify_jwt = false

[functions.reactivate-eastbourne-sources]
verify_jwt = false

[functions.source-health-alerts]
verify_jwt = false

[functions.share-page]
verify_jwt = false

[functions.track-engagement-metric]
verify_jwt = false

# Content scraping & extraction
[functions.universal-scraper]
verify_jwt = false

[functions.unified-scraper]
verify_jwt = false

[functions.multi-tenant-scraper]
verify_jwt = false

[functions.universal-topic-scraper]
verify_jwt = false

[functions.universal-topic-automation]
verify_jwt = false

[functions.topic-automation-monitor]
verify_jwt = false

[functions.manual-topic-scrape]
verify_jwt = false

[functions.topic-aware-scraper]
verify_jwt = false

[functions.content-extractor]
verify_jwt = false

[functions.content-extractor-multi-tenant]
verify_jwt = false

[functions.discover-article-urls]
verify_jwt = false

[functions.hybrid-scraper]
verify_jwt = false

[functions.intelligent-scraper]
verify_jwt = false

[functions.beautiful-soup-scraper]
verify_jwt = false

[functions.screenshot-ai-scraper]
verify_jwt = false

# Firecrawl fallback wrapper (must be callable without JWT)
[functions.firecrawl-scraper]
verify_jwt = false

# Content processing
[functions.enhanced-content-generator]
verify_jwt = false


[functions.content-quality-analyzer]
verify_jwt = false

[functions.duplicate-detector]
verify_jwt = false

[functions.duplicate-prevention-scraper]
verify_jwt = false

[functions.sentiment-detector]
verify_jwt = false

# Queue & job processing
[functions.queue-processor]
verify_jwt = false

[functions.job-processor]
verify_jwt = false

[functions.automated-scheduler]
verify_jwt = false

# [functions.eezee-automation-service]
# verify_jwt = false
# DISABLED: Causing articles to be auto-discarded - needs debugging

[functions.auto-simplify-queue]
verify_jwt = false

[functions.auto-generate-topic-keywords]
verify_jwt = false

# Story operations
[functions.story-illustrator]
verify_jwt = false

[functions.animate-illustration]
verify_jwt = true

[functions.auto-illustrate-stories]
verify_jwt = false

[functions.select-story-cover]
verify_jwt = true

[functions.delete-cover-option]
verify_jwt = true

[functions.delete-story-illustration]
verify_jwt = true

[functions.delete-story-animation]
verify_jwt = true

[functions.delete-story-cascade]
verify_jwt = true

[functions.promote-topic-article]
verify_jwt = false

[functions.publish-ready-stories]
verify_jwt = false

# Image generation
# Archived slide visual generators - not in use:
# [functions.image-generator]
# [functions.nebius-image-generator]
# [functions.gemini-image-generator]

# MidJourney via KIE API (experimental)
[functions.midjourney-image-generator]
verify_jwt = true

# Roundups & notifications
[functions.generate-daily-roundup]
verify_jwt = false

[functions.generate-weekly-roundup]
verify_jwt = false

[functions.send-story-notification]
verify_jwt = false

[functions.automated-roundup-notifier]
verify_jwt = false

[functions.send-email-newsletter]
verify_jwt = false

# Parliamentary data
[functions.uk-parliament-collector]
verify_jwt = false

[functions.fetch-current-mps]
verify_jwt = false

[functions.auto-detect-regional-mps]
verify_jwt = false

# Sentiment & community
[functions.sentiment-card-scheduler]
verify_jwt = false

[functions.reddit-community-processor]
verify_jwt = false

[functions.reddit-community-scheduler]
verify_jwt = false

# Monitoring & recovery
[functions.health-check]
verify_jwt = false

[functions.scrape-monitor]
verify_jwt = false

[functions.source-health-monitor]
verify_jwt = false

[functions.daily-content-monitor]
verify_jwt = false

[functions.auto-recover-stuck-stories]
verify_jwt = false

[functions.reset-stuck-processing]
verify_jwt = false

[functions.error-logger]
verify_jwt = false

# Analytics
[functions.analytics-dashboard]
verify_jwt = false

[functions.openai-usage-tracker]
verify_jwt = true

# Cleanup (scheduled via cron)
[functions.cleanup-temp-uploads]
verify_jwt = false

[functions.duplicate-cleanup]
verify_jwt = false

[functions.source-cleanup]
verify_jwt = false

# ========================================
# ADMIN/MAINTENANCE FUNCTIONS (JWT Required)
# ========================================

[functions.test-image-generator]
verify_jwt = true

[functions.test-scraper-fix]
verify_jwt = true

[functions.test-beautiful-soup]
verify_jwt = true

[functions.test-screenshot-minimal]
verify_jwt = true

[functions.test-processing-pipeline]
verify_jwt = true

[functions.test-content-generator]
verify_jwt = true

[functions.newsquest-arc-scraper]
verify_jwt = false

[functions.emergency-scrape-fix]
verify_jwt = true

[functions.emergency-scrape-test]
verify_jwt = true

[functions.emergency-source-fix]
verify_jwt = true

[functions.fix-topic-keywords]
verify_jwt = true

[functions.fix-future-dated-article]
verify_jwt = true

[functions.ai-scraper-recovery]
verify_jwt = true

[functions.enhanced-source-validator]
verify_jwt = true

[functions.validate-content-source]
verify_jwt = true

[functions.validate-and-fix-sources]
verify_jwt = true

[functions.update-source-feed-url]
verify_jwt = false

[functions.validate-parliamentary-completeness]
verify_jwt = true

[functions.source-link-validator]
verify_jwt = true

[functions.universal-platform-fix]
verify_jwt = true

[functions.schedule-recovery]
verify_jwt = true

[functions.backfill-parliamentary-metadata]
verify_jwt = true

[functions.backfill-keyword-analytics]
verify_jwt = true

[functions.backfill-sentiment-tracking]
verify_jwt = true

[functions.backfill-story-linkage]
verify_jwt = true

[functions.backfill-discarded-articles]
verify_jwt = true

[functions.parliamentary-weekly-backfill]
verify_jwt = true

[functions.source-metrics-backfill]
verify_jwt = true

[functions.backfill-sentiment-card-sources]
verify_jwt = false

[functions.cleanup-invalid-parliamentary-mentions]
verify_jwt = true

[functions.cleanup-misplaced-articles]
verify_jwt = true

[functions.cleanup-offtracking-parliamentary-votes]
verify_jwt = true

[functions.cleanup-parliamentary-test-data]
verify_jwt = true

[functions.cleanup-stale-source-errors]
verify_jwt = true

[functions.clear-old-events]
verify_jwt = true

[functions.bulk-cleanup-articles]
verify_jwt = true

[functions.auto-cleanup-duplicates]
verify_jwt = true

[functions.auto-deactivate-failing-sources]
verify_jwt = true

[functions.dedupe-topic-stories]
verify_jwt = true

[functions.pipeline-cleanup]
verify_jwt = true

[functions.recover-orphaned-urls]
verify_jwt = true

[functions.mark-article-discarded]
verify_jwt = true

[functions.keyword-rescan-trigger]
verify_jwt = true

[functions.suggest-content-sources]
verify_jwt = true

[functions.suggest-keywords]
verify_jwt = true

[functions.suggest-regional-elements]
verify_jwt = true

[functions.suggest-regional-keywords]
verify_jwt = true

[functions.auto-populate-regional-keywords]
verify_jwt = true

[functions.re-extract-articles]
verify_jwt = true

[functions.extract-content-from-upload]
verify_jwt = true

[functions.update-source-metrics]
verify_jwt = true

[functions.sync-topic-source-feed-urls]
verify_jwt = true

[functions.fix-source-urls]
verify_jwt = true

[functions.clean-slate-migration]
verify_jwt = true

[functions.phase2-verification]
verify_jwt = true

[functions.waitlist-signup]
verify_jwt = true

[functions.ai-event-generator]
verify_jwt = true

[functions.api-event-collector]
verify_jwt = true

[functions.automated-event-scheduler]
verify_jwt = true

[functions.social-media-publisher]
verify_jwt = true

[functions.sitemap-xml]
verify_jwt = false

[functions.clear-sentiment-keywords]
verify_jwt = false

# ========================================
# AUTOMATED INSIGHT CARDS
# ========================================

[functions.insight-card-scheduler]
verify_jwt = false

[functions.generate-social-proof-cards]
verify_jwt = false

[functions.generate-story-momentum-cards]
verify_jwt = false

# ========================================
# QUIZ CARDS
# ========================================

[functions.generate-quiz-questions]
verify_jwt = false

[functions.submit-quiz-response]
verify_jwt = false

# ========================================
# SENTIMENT HISTORY
# ========================================

[functions.sentiment-history-snapshot]
verify_jwt = false

# ========================================
# DRIP FEED
# ========================================

[functions.drip-feed-scheduler]
verify_jwt = false

# ========================================
# WIDGET API
# ========================================

[functions.widget-feed-data]
verify_jwt = false

[functions.widget-analytics]
verify_jwt = false

[functions.widget-avatar-upload]
verify_jwt = false

[functions.rss-feed]
verify_jwt = false

# ========================================
# FIRECRAWL INTEGRATION (Fallback Scraper)
# ========================================

[functions.firecrawl-scraper]
verify_jwt = false

[functions.deactivate-sources]
verify_jwt = false

# ========================================
# BRANDING IMAGE OPTIMIZATION
# ========================================

[functions.optimize-branding-image]
verify_jwt = false

[functions.optimize-existing-images]
verify_jwt = false
